<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title id="title">ClouDrop</title>
    <!-- Materialize CDN -->
  <link href="css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- firebase CDN -->  
  <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>  	
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-storage.js"></script>
  
</head>
<body>

  <p id="uid" hidden></p>


<div class="navbar-fixed">  
  <nav class="nav-cl hamburger-menu-background">
    <div class="nav-wrapper">
      <a href="#!" class="brand-logo">Blocked Book</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a class="waves-effect waves-light radius btn cl-btn-light" href="./Logged.html"><i class="material-icons left">home</i>Inicio</a></li>
        <li><a class="waves-effect waves-light radius btn cl-btn-light" href="./tipoLibro.html"><i class="material-icons left">book</i>Tipo Libro</a></li>
        <li><a class="waves-effect waves-light radius btn cl-btn-light" href="./Prestamos.html"><i class="material-icons left">event_note</i>Prestamos</a></li>
        <li><a class="waves-effect waves-light radius btn cl-btn-light" onclick="LogOut()"><i class="material-icons left">exit_to_app</i>Salir</a></li>        
      </ul>
    </div>
  </nav>  
</div>

  <ul class="sidenav hamburger-menu-background" id="mobile-demo">    
    <div class="center-align">   
      <br>
      <a class="waves-effect waves-light radius btn cl-btn-light-hamburger-menu" href="./Logged.html"><i class="tiny material-icons left">home</i>Inicio</a>
      <a class="waves-effect waves-light radius btn cl-btn-light-hamburger-menu" href="./Prestamos.html"><i class="material-icons left">event_note</i>Prestamos</a>      
      <a class="waves-effect waves-light radius btn cl-btn-light-hamburger-menu" href="./tipoLibro.html"><i class="material-icons left">book</i>Tipo Libro</a>      
      <a class="waves-effect waves-light radius btn cl-btn-light-hamburger-menu" onclick="LogOut()"><i class="material-icons left">exit_to_app</i>Salir</a>     
    </div>    
  </ul>

  <br>






  <div class="row">
    <div class="col s12 m12 l3">    


          <div class="card body-card-radius">
            <div class="card-image">
              <img src="img/backgroung-image.jpg" class="image-radius">   
              <div class="centrado"><h4 id="User" style="color: white;">Cargando...</h4></div>          
              <div class="own"> 
      
                <div class="flexi">
                  <img class="" id="ProfileUserImage" src="https://www.stickpng.com/assets/images/585e4beacb11b227491c3399.png">  
                  <div>
                    <!-- <a class="waves-effect waves-light btn">Nuevo</a> -->
                  </div>
                </div>                        
                <!-- <center>
                  <b><span>User</span></b>
                </center>              -->
              </div>                          
            </div>
            <div class="card-content">
              <br>
              <br>          
              <br>   
              <hr>       
              <div class="right-align">
                <a class="waves-effect waves-light radius btn cl-btn-adjust" href="./Logged.html"><i class="material-icons left">settings</i>Ajustes</a>
                  </div>
            </div>
          </div>

          <ul class="collapsible radius">
            <li>
              <div class="collapsible-header radius-top" onclick="ShowAdjust()"><i class="material-icons">settings</i>Ajustes</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>

          </ul>          
   
                     
    </div>

    <div class="col s12 m12 l9">
      <h5 class="brand-logo left white-text"><i class="material-icons right">favorite</i>Libros Favoritos</h5>
      <br>
      <br>
      <br>                
        <div id="divFavoriteBooks" class="divFavoriteBooks">

          <!-- <div class="container-image-favorite-book">
            <img src="img/bg-night.jpg" style="width:100%; height: 100px;" class="image-favorite-card">
            <div class="top-left">      
              <div class="flex-favorite-card">
                <div class=""></div>
                  <a class="waves-effect waves-light circle-letter-favorite-book"><h4><b>
                    <p class="letter-favorite-book white-text" style="font-family: Georgia, 'Times New Roman', Times, serif">
                      D</p></b></h4></a>
                </div>
                <div class="name-letter-favorite-book">
                  <div class="left-align">
                    <h5>r√°cula</h5>                      
                    <p></p>                           
                  </div>
                </div>
              </div>                
            </div>
            <div class="top-right">
              <div class="radius">
                <i class="material-icons white-text favorite-icon-index" title="Quitar de mi lista de favoritos">favorite</i>
              </div>          
            </div>  -->

          </div>

          

        </div>
                                    
            </div>
          </div>
      
        </div>
      </div>  

          
        


    </div>
  </div>
    
        






  <!-- <div class="profileContent">
    <img src="img/backgroung-image.jpg" />
    <div class="texto-encima">Texto</div>
    <div class="centrado">Centrado</div>
  </div>


	<div class="container-a4">
		<ul class="caption-style-4">
			<li>
				<img src="img/backgroung-image.jpg"" alt="" >
				<div class="caption">
					<div class="blur"></div>
					<div class="caption-text">
						<h1>Amazing Caption</h1>
						<p>Whatever It Is - Always Awesome</p>
					</div>
				</div>
			</li>
			<li>
		</ul>
	</div> -->
  





<script>
	  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyAvJcXJAvbIdc0KfJLH3CyQ0gvnP1sHKF0",
    authDomain: "cld-beta.firebaseapp.com",
    databaseURL: "https://cld-beta.firebaseio.com",
    projectId: "cld-beta",
    storageBucket: "cld-beta.appspot.com",
    messagingSenderId: "643649556510",
    appId: "1:643649556510:web:7388c54638e3321944de0f"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    var displayName = user.displayName;
    var email = user.email;
    var emailVerified = user.emailVerified;
    var photoURL = user.photoURL;
    var isAnonymous = user.isAnonymous;
    var uid = user.uid;
    var providerData = user.providerData;
    console.log("Existe Usuario Activo");    

      //Mostrar Registros De Los Libros FAVORITOS 
  firebase.firestore().collection(uid).orderBy("timestamp", "desc").where("favorite", "==", "Si")
  .onSnapshot(doc=>{         
    listarLibrosFavoritos(doc);   
  });


  } else {
  	window.location='../login-firebase/index.html';
    console.log("No Existe Usuario Activo");


  }

  //Traer Datos Del Usuario
var docRef = firebase.firestore().collection(uid).doc("UserData");
docRef.get().then(function(doc) {
if (doc.exists) {
    var user=doc.data();    
    document.getElementById('uid').innerHTML = user.uid;
    document.getElementById('User').innerHTML = user.displayName;    
    document.getElementById('ProfileUserImage').src = user.photoURL
} else {
    // doc.data() will be undefined in this case
    console.log("El documento no existe!");
}
}).catch(function(error) {
console.log("Error getting document:", error);
});

  });


</script>	
  <script src="js/app.js"></script>
  <!-- Materialize -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>  
  <script src="js/init.js"></script>

  <script src="js/Logged.js"></script>
</body>
</html>


